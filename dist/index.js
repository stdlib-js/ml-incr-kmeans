"use strict";var h=function(r,e){return function(){return e||r((e={exports:{}}).exports,e),e.exports}};var L=h(function(Fa,$){
var Xr=require('@stdlib/array-float64/dist'),re=require('@stdlib/ndarray-ctor/dist'),ee=require('@stdlib/ndarray-base-ctor/dist');function ae(r,e,v){var o,n,i,s;return v?s=ee:s=re,n=new Xr(r*e),i=[r,e],o=[e,1],s("float64",n,i,o,0,"row-major")}$.exports=ae
});var X=h(function(Ia,Y){
var ie=require('@stdlib/blas-base-gcopy/dist').ndarray;function te(r,e){var v,o,n,i,s,a,u,t,f,m,d;for(f=e.shape[0],m=e.shape[1],v=e.data,o=r.data,n=e.strides[0],i=e.strides[1],s=r.strides[0],a=r.strides[1],u=e.offset,t=r.offset,d=0;d<f;d++)ie(m,v,i,u,o,a,t),u+=n,t+=s;return r}Y.exports=te
});var er=h(function(ja,rr){
var se=require('@stdlib/array-float64/dist'),ne=require('@stdlib/ndarray-ctor/dist'),ve=require('@stdlib/ndarray-base-ctor/dist');function ue(r,e){var v,o,n,i;return e?i=ve:i=ne,o=new se(r),n=[r],v=[1],i("float64",o,n,v,0,"row-major")}rr.exports=ue
});var ir=h(function(Pa,ar){
var oe=require('@stdlib/blas-base-gcopy/dist').ndarray;function fe(r,e){return oe(e.shape[0],e.data,e.strides[0],e.offset,r.data,r.strides[0],r.offset),r}ar.exports=fe
});var tr=h(function(Sa,ce){ce.exports=["euclidean","correlation","cosine"]});var sr=h(function(La,de){de.exports=["forgy","sample","kmeans++"]});var dr=h(function(Ra,cr){
var le=require('@stdlib/assert-is-plain-object/dist'),j=require('@stdlib/assert-has-own-property/dist'),nr=require('@stdlib/assert-is-boolean/dist').isPrimitive,me=require('@stdlib/assert-is-array-like-object/dist'),vr=require('@stdlib/assert-is-positive-integer/dist').isPrimitive,ur=require('@stdlib/array-base-assert-contains/dist').factory,C=require('@stdlib/error-tools-fmtprodmsg/dist'),or=tr(),fr=sr(),pe=ur(or),qe=ur(fr);function he(r,e){if(!le(e))return new TypeError(C('0h32V',e));if(j(e,"metric")&&(r.metric=e.metric,!pe(r.metric)))return new TypeError(C('0h34S',"metric",or.join('", "'),r.metric));if(j(e,"init")){if(!me(e.init))return new TypeError(C('0h34l',"init",e.init));if(!qe(e.init[0]))return new TypeError(C('0h34y',"init",fr.join('", "'),e.init[0]));if(r.init[0]=e.init[0],e.init.length>1&&(r.init[1]=e.init[1],!vr(r.init[1])))return new TypeError(C('0h34z',"init",r.init[1]));if(e.init.length>2&&(r.init[2]=e.init[2],!vr(r.init[2])))return new TypeError(C('0h350',"init",r.init[2]));}return j(e,"normalize")&&(r.normalize=e.normalize,!nr(r.normalize))?new TypeError(C('0h32o',"normalize",r.normalize)):j(e,"copy")&&(r.copy=e.copy,!nr(r.copy))?new TypeError(C('0h32o',"copy",r.copy)):(j(e,"seed")&&(r.seed=e.seed),null);}cr.exports=he
});var lr=h(function(Da,ye){ye.exports={forgy:["forgy",1],sample:["sample",1],"kmeans++":["kmeans++",1,1]}});var R=h(function(_a,mr){
var ge=require('@stdlib/math-base-special-sqrt/dist');function xe(r,e,v,o){var n,i,s,a;for(i=0,n=o,a=0;a<r;a++)s=e[n],i+=s*s,n+=v;for(i=ge(i),n=o,a=0;a<r;a++)e[n]/=i;return e}mr.exports=xe
});var D=h(function(Ba,pr){
var be=R();function we(r){var e,v,o,n,i,s,a;for(e=r.data,i=r.shape[0],s=r.shape[1],v=r.strides[0],o=r.strides[1],n=r.offset,a=0;a<i;a++)be(s,e,o,n),n+=v;return r}pr.exports=we
});var _=h(function(Ga,qr){
function Ee(r,e,v,o,n,i,s,a,u,t){var f,m,d,l;for(f=o,m=s,d=t,l=0;l<r;l++)e[f]=(e[f]-n[m])/a[d],f+=v,m+=i,d+=u;return e}qr.exports=Ee
});var B=h(function(Ha,hr){
var ze=_();function Te(r,e){var v,o,n,i,s,a,u;for(v=r.data,s=r.shape[0],a=r.shape[1],o=r.strides[0],n=r.strides[1],i=r.offset,u=0;u<s;u++)ze(a,v,n,i,e,2,0,e,2,1),i+=o;return r}hr.exports=Te
});var gr=h(function(Ua,yr){
var Me=require('@stdlib/random-sample/dist').factory,Oe=require('@stdlib/blas-base-dcopy/dist').ndarray;function ke(r,e,v){var o,n,i,s,a,u,t,f,m,d,l,y;for(d=r.shape[0],l=r.shape[1],i=r.data,t=r.strides[1],f=r.offset,s=e.data,a=e.strides[0],u=e.strides[1],n=[],y=0;y<e.shape[0];y++)n.push(y);for(d===n.length?m=n:(o=Me({seed:v,size:d,mutate:!1,replacement:!1}),m=o(n)),y=0;y<d;y++)Oe(l,s,u,a*m[y],i,t,f);return r}yr.exports=ke
});var br=h(function(Ja,xr){
var Ae=require('@stdlib/math-base-special-sqrt/dist');function Ne(r,e,v,o,n,i,s){var a,u,t,f,m;for(a=o,u=s,f=0,m=0;m<r;m++)t=e[a]-n[u],f+=t*t,a+=v,u+=i;return Ae(f)}xr.exports=Ne
});var G=h(function(Ka,wr){
var Ve=br();function Ce(r,e,v,o,n,i,s){var a=Ve(r,e,v,o,n,i,s);return a*a}wr.exports=Ce
});var H=h(function(Qa,Er){
function Fe(r,e,v,o,n,i,s){var a,u,t,f;for(a=o,u=s,t=0,f=0;f<r;f++)t+=e[a]*n[u],a+=v,u+=i;return t}Er.exports=Fe
});var U=h(function(Wa,zr){
var Ie=H();function je(r,e,v,o,n,i,s){var a=1-Ie(r,e,v,o,n,i,s);return a*a}zr.exports=je
});var J=h(function(Za,Tr){
var Pe=H();function Se(r,e,v,o,n,i,s){var a=1-Pe(r,e,v,o,n,i,s);return a*a}Tr.exports=Se
});var Ar=h(function($a,kr){
var Le=require('@stdlib/random-base-discrete-uniform/dist').factory,Re=require('@stdlib/random-base-mt19937/dist').factory,Mr=require('@stdlib/constants-float64-pinf/dist'),Or=require('@stdlib/blas-base-dcopy/dist').ndarray,De=G(),_e=U(),Be=J();function Ge(r,e,v,o,n,i){var s,a,u,t,f;for(t=n.data,u=n.strides[0],s=u*i,a=0,f=0;f<v;f++)r[f]=e(o,t,1,a,t,1,s),a+=u;return r}function He(r,e,v,o,n){var i,s,a,u,t,f,m,d,l,y,w,b,x,p,g,O,A,N,k,M,c,E,z,T,Z,q,I,S;if(T=r.shape[0],u=r.shape[1],d=e.shape[0],b=r.data,A=r.strides[0],N=r.strides[1],k=r.offset,x=e.data,g=e.strides[0],O=e.strides[1],m=Re({seed:n}),a=Le({seed:m()}),m=m.normalized,v==="cosine"?w=_e:v==="correlation"?w=Be:w=De,z=a(0,d-1),T===1)return Or(u,x,O,g*z,b,N,k);for(i=[z],M=new Array(u),t=new Array(d*2),p=0,q=0;q<d;q++)t[p]=Mr,t[p+1]=0,p+=2;for(f=new Array(d),I=1;I<T;I++){for(Ge(M,w,d,u,e,i[I-1]),l=0,p=0,q=0;q<d;q++)M[q]<t[p]?(t[p]=M[q],t[p+1]=I-1,l+=M[q]):l+=t[p],p+=2;for(f[0]=t[0]/l,p=2,q=1;q<d;q++)f[q]=f[q-1]+t[p]/l,p+=2;for(y=Mr,c=-1,S=0;S<o;S++){for(z=-1;z===-1;)for(Z=m(),q=0;q<d;q++)if(Z<f[q]){z=q;break}for(l=0,s=g*z,p=0,q=0;q<d;q++)E=w(u,x,1,g*q,x,1,s),E<t[p]?l+=E:l+=t[p],p+=2;l<y&&(y=l,c=z)}i.push(c)}for(q=0;q<T;q++)Or(u,x,O,g*i[q],b,N,k),k+=A;return r}kr.exports=He
});var Vr=h(function(Ya,Nr){
var Ue=require('@stdlib/random-base-discrete-uniform/dist').factory,Je=require('@stdlib/stats-incr-mean/dist');function Ke(r,e,v){var o,n,i,s,a,u,t,f,m,d,l,y,w,b,x,p,g;for(b=r.shape[0],x=r.shape[1],n=r.data,t=r.strides[0],f=r.strides[1],d=r.offset,s=e.data,i=e.shape[0],a=e.strides[0],u=e.strides[1],y=e.offset,o=Ue(0,b-1,{seed:v}),m=[],p=0;p<b*x;p++)m.push(Je());for(p=0;p<i;p++){for(w=o(),l=x*w,g=0;g<x;g++)m[l+g](s[y+u*g]);y+=a}for(l=0,p=0;p<b;p++){for(g=0;g<x;g++)n[d+f*g]=m[l](),l+=1;d+=t}return r}Nr.exports=Ke
});var K=h(function(Xa,Cr){
var Qe=require('@stdlib/constants-float64-pinf/dist');function We(r,e,v,o,n,i,s,a,u){var t,f,m,d;for(t=Qe,d=0;d<e;d++)m=r(v,o,1,i,s,a,u),m<t&&(t=m,f=d),i+=n;return f}Cr.exports=We
});var Q=h(function(ri,Fr){
function Ze(r,e,v,o,n,i,s,a){var u,t,f;for(f=0;f<r;f++)t=v[n],u=i[a]-t,t+=u/e,v[n]=t,n+=o,a+=s;return v}Fr.exports=Ze
});var jr=h(function(ei,Ir){
var $e=K(),Ye=Q();function Xe(r,e,v,o,n){var i,s,a,u,t,f,m,d,l,y,w,b,x;for(y=e.shape[0],i=e.shape[1],u=r.shape[0],s=e.data,t=e.strides[0],a=r.data,f=r.strides[0],d=0,x=0;x<u;x++)w=$e(n,y,i,s,t,0,a,1,d),m=t*w,l=v.get(w,0)+1,Ye(i,l,s,1,m,a,1,d),b=n(i,s,1,m,a,1,d),o(w,b),d+=f}Ir.exports=Xe
});var Sr=h(function(ai,Pr){
var ra=require('@stdlib/blas-base-gcopy/dist').ndarray,ea=L(),aa=D(),ia=B(),ta=gr(),sa=Ar(),na=Vr(),va=jr();function ua(r,e,v,o,n,i){var s,a;return a=r.shape[1],u;function u(t){return s===void 0&&(s=ea(i.init[1],a,!0),s.count=0),s.count<i.init[1]&&(ra(a,t.data,t.strides[0],t.offset,s.data,s.strides[1],s.strides[0]*s.count),s.count+=1,s.count<i.init[1])?!1:(i.normalize&&(i.metric==="cosine"?s=aa(s):i.metric==="correlation"&&(s=ia(s,o()))),i.init[0]==="forgy"?r=na(r,s,i.seed):i.init[0]==="sample"?r=ta(r,s,i.seed):r=sa(r,s,i.metric,i.init[2],i.seed),va(s,r,e,v,n),!0)}}Pr.exports=ua
});var Rr=h(function(ii,Lr){
var oa=require('@stdlib/math-base-special-sqrt/dist');function fa(r,e){var v,o;for(v=[],o=0;o<e;o++)v.push(0);return n;function n(i,s){var a,u,t;return t=r.get(i,0)+1,r.set(i,0,t),r.set(i,1,r.get(i,1)+s),u=r.get(i,2),a=s-u,u+=a/t,v[i]+=a*(s-u),r.set(i,2,u),r.set(i,3,oa(v[i]/(t-1))),r}}Lr.exports=fa
});var Br=h(function(ti,_r){
var ca=require('@stdlib/stats-incr-meanstdev/dist'),Dr=require('@stdlib/array-float64/dist');function da(r){var e,v,o,n,i,s;for(v=2,n=new Dr(r*v),e=v*n.BYTES_PER_ELEMENT,o=[],i=0,s=0;s<r;s++)o.push(ca(new Dr(n.buffer,i,v))),i+=e;return a;function a(u){var t;if(arguments.length===0)return n;for(t=0;t<r;t++)o[t](u.get(t));return n}}_r.exports=da
});var Yr=h(function(si,$r){
var Gr=require('@stdlib/assert-is-positive-integer/dist').isPrimitive,Hr=require('@stdlib/assert-is-matrix-like/dist'),Ur=require('@stdlib/assert-is-vector-like/dist'),Jr=require('@stdlib/utils-define-nonenumerable-read-only-property/dist'),V=require('@stdlib/error-tools-fmtprodmsg/dist'),la=require('@stdlib/random-base-minstd-shuffle/dist'),ma=require('@stdlib/math-base-special-floor/dist'),pa=require('@stdlib/math-base-special-ln/dist'),Kr=require('@stdlib/blas-base-dcopy/dist'),F=L(),P=X(),W=er(),Qr=ir(),qa=dr(),ha=lr(),ya=Sr(),ga=Rr(),xa=Br(),ba=G(),wa=U(),Ea=J(),Wr=K(),za=Q(),Ta=R(),Ma=D(),Oa=_(),ka=B(),Zr=4;function Aa(r,e){var v={};return v.centroids=F(r,e,!1),v.stats=F(r,Zr,!1),v}function Na(){var r,e,v,o,n,i,s,a,u,t,f,m,d,l;if(Hr(arguments[0]))l=arguments[0].shape[0],a=arguments[0].shape[1],e=F(l,a,!0),e=P(e,arguments[0]),arguments.length>1&&(o=arguments[1],d=!0);else if(Gr(arguments[0])){if(l=arguments[0],a=arguments[1],!Gr(a))throw new TypeError(V('0h34p',a));arguments.length>2&&(o=arguments[2],d=!0)}else throw new TypeError(V('0h34q',arguments[0]));if(t={metric:"euclidean",init:ha["kmeans++"].slice(),seed:la(),normalize:!0,copy:!0},t.init[1]=l,t.init[2]=2+ma(pa(l)),d&&(m=qa(t,o),m))throw m;if(t.init[1]<l)throw new RangeError(V('0h34r',"init",t.init[1]));return n=Aa(l,a),s=F(l,Zr,!0),r=ga(s,l),t.metric==="cosine"?(u=wa,t.copy&&(i=W(a,!0))):t.metric==="correlation"?(u=Ea,t.normalize&&(v=xa(a)),t.copy&&(i=W(a,!0))):u=ba,e===void 0?(e=F(l,a,!0),f=ya(e,s,r,v,u,t)):P(n.centroids,e),Jr(y,"seed",t.seed),Jr(y,"predict",w),y;function y(b){var x,p,g,O,A,N,k,M,c,E,z,T;if(arguments.length===0)return f?null:n;if(c=b,!Ur(c))throw new TypeError(V('0h3Dd',c));if(c.shape[0]!==a)throw new Error(V('0h34t',a,c.shape[0]));if(v&&v(c),f){if(x=f(c),x===!1)return null;f=void 0}else t.normalize&&(t.metric==="cosine"?(t.copy&&(c=Qr(i,c)),Ta(a,c.data,c.strides[0],c.offset)):t.metric==="correlation"&&(t.copy&&(c=Qr(i,c)),O=v(),Oa(a,c.data,c.strides[0],c.offset,O,2,0,O,2,1))),p=e.data,N=e.strides[0],g=c.data,A=c.strides[0],k=c.offset,T=Wr(u,l,a,p,N,0,g,A,k),M=N*T,E=s.get(T,0)+1,za(a,E,p,1,M,g,A,k),z=u(a,p,1,M,g,A,k),r(T,z);return Kr(e.length,e.data,1,n.centroids.data,1),Kr(s.length,s.data,1,n.stats.data,1),n}function w(b,x){var p,g,O,A,N,k,M,c,E,z,T;if(arguments.length>1){if(!Ur(b))throw new TypeError(V('0h3Ec',b));E=b,c=x}else c=b;if(!Hr(c))throw new TypeError(V('0h3Ed',c));if(c.shape[1]!==a)throw new Error(V('0h3Ee',a,c.shape[1]));if(E===void 0)E=W(c.shape[0],!1);else if(E.length!==c.shape[0])throw new Error(V('0h34x',c.shape[0],E.length));if(f)return null;for(O=c.shape[0],t.normalize&&(t.metric==="cosine"?(t.copy&&(c=P(F(O,a,!0),c)),c=Ma(c)):t.metric==="correlation"&&(t.copy&&(c=P(F(O,a,!0),c)),c=ka(c,v()))),g=e.data,k=e.strides[0],p=c.data,A=c.strides[0],N=c.strides[1],M=c.offset,T=0;T<O;T++)z=Wr(u,l,a,g,k,0,p,N,M),E.set(T,z),M+=A;return E}}$r.exports=Na
});var Va=Yr();module.exports=Va;
/** @license Apache-2.0 */
//# sourceMappingURL=index.js.map
